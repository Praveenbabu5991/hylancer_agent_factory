# Hylancer Agent Factory ğŸ¨

A **multi-agent social media content creation platform** powered by Google ADK (Agent Development Kit) and Gemini AI models.

## Features

- ğŸ¤– **7 Specialized AI Agents** working together with intelligent orchestration
- ğŸ¯ **Smart Workflow Management** - State machine-based routing with proper context handoffs
- ğŸ¨ **Brand Integration** - Logo, colors, reference images, user images, and tone consistency
- ğŸ“… **Calendar-Aware** - Suggests content based on upcoming events and festivals
- ğŸ–¼ï¸ **AI Image Generation** - Creates professional Instagram-ready visuals with Gemini 2.0
- âœï¸ **Caption & Hashtag Generation** - Engaging copy optimized for engagement
- ğŸ¬ **Video/Animation** - Transform static images into Reels with Veo 2.0
- ğŸ“… **Campaign Planning** - Multi-week content calendars with week-by-week approval
- ğŸ’¾ **Persistent Storage** - SQLite-based session and memory management
- ğŸ”§ **Per-Agent Model Configuration** - Environment-based model selection

---

## Architecture Overview

### High-Level System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (Browser)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        ContentStudioApp (JS)                         â”‚   â”‚
â”‚  â”‚  â€¢ Brand Setup Form        â€¢ Chat Interface      â€¢ Gallery Panel    â”‚   â”‚
â”‚  â”‚  â€¢ User Image Upload       â€¢ Choice Buttons      â€¢ Caption Display  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ HTTP/SSE
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BACKEND (FastAPI)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      fast_api_app.py                                 â”‚   â”‚
â”‚  â”‚  â€¢ /chat/stream (SSE)      â€¢ /upload-logo       â€¢ /upload-user-imageâ”‚   â”‚
â”‚  â”‚  â€¢ /sessions               â€¢ /generated-images  â€¢ /health           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ContentStudioManager (Python)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ Session Management      â€¢ Workflow State Machine                 â”‚   â”‚
â”‚  â”‚  â€¢ Brand Context Storage   â€¢ Agent Orchestration                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AGENT LAYER (Google ADK)                            â”‚
â”‚                                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚                    RootAgent (Orchestrator)                      â”‚      â”‚
â”‚    â”‚  â€¢ Routes requests to specialized agents                         â”‚      â”‚
â”‚    â”‚  â€¢ Manages workflow state transitions                            â”‚      â”‚
â”‚    â”‚  â€¢ Maintains brand context across agents                         â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                    â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â”‚                          â”‚                          â”‚             â”‚
â”‚         â–¼                          â–¼                          â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Idea     â”‚          â”‚   Writer    â”‚          â”‚  Campaign   â”‚         â”‚
â”‚  â”‚ Suggestion  â”‚          â”‚   Agent     â”‚          â”‚  Planner    â”‚         â”‚
â”‚  â”‚   Agent     â”‚          â”‚   (Brief)   â”‚          â”‚   Agent     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                          â”‚                          â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                    â–¼                                         â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                          â”‚  ImagePost      â”‚                                 â”‚
â”‚                          â”‚  Agent          â”‚                                 â”‚
â”‚                          â”‚ (Image+Caption) â”‚                                 â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â–¼                               â–¼                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚    Edit     â”‚                â”‚  Animation  â”‚                   â”‚
â”‚            â”‚   Agent     â”‚                â”‚   Agent     â”‚                   â”‚
â”‚            â”‚ (Regenerate)â”‚                â”‚  (Video)    â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TOOLS LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ image_gen   â”‚  â”‚  content    â”‚  â”‚  calendar   â”‚  â”‚ web_search  â”‚        â”‚
â”‚  â”‚ â€¢ generate  â”‚  â”‚ â€¢ caption   â”‚  â”‚ â€¢ events    â”‚  â”‚ â€¢ trending  â”‚        â”‚
â”‚  â”‚ â€¢ edit      â”‚  â”‚ â€¢ hashtags  â”‚  â”‚ â€¢ festivals â”‚  â”‚ â€¢ search    â”‚        â”‚
â”‚  â”‚ â€¢ animate   â”‚  â”‚ â€¢ improve   â”‚  â”‚ â€¢ timing    â”‚  â”‚             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           EXTERNAL SERVICES                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Gemini 2.5 Flash  â”‚  â”‚ Gemini 2.0 Flash Expâ”‚  â”‚    Veo 2.0         â”‚ â”‚
â”‚  â”‚   (Text/Reasoning)  â”‚  â”‚ (Image Generation)  â”‚  â”‚ (Video Generation) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Agent Architecture

### 7 Specialized Agents

| Agent | Responsibility | Model | Key Tools |
|-------|---------------|-------|-----------|
| **RootAgent** (Orchestrator) | Routes requests, manages state, coordinates workflow | `ORCHESTRATOR_MODEL` | All sub-agents |
| **IdeaSuggestionAgent** | Brainstorms content ideas based on calendar & trends | `IDEA_MODEL` | calendar, web_search |
| **WriterAgent** | Creates detailed visual briefs from ideas | `WRITER_MODEL` | content tools |
| **ImagePostAgent** | Generates images + captions + hashtags | `IMAGE_MODEL` | generate_complete_post |
| **EditPostAgent** | Edits/regenerates posts based on feedback | `EDIT_MODEL` | regenerate_post, edit_image |
| **CampaignPlannerAgent** | Plans multi-week content calendars | `CAMPAIGN_MODEL` | calendar, generate_complete_post |
| **AnimationAgent** | Creates videos/reels from images | `VIDEO_MODEL` | animate_image |

### Agent Interaction Flow

```
User Request
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RootAgent                                 â”‚
â”‚                                                                  â”‚
â”‚  1. Analyze user intent                                         â”‚
â”‚  2. Check workflow state                                        â”‚
â”‚  3. Route to appropriate agent                                  â”‚
â”‚  4. Collect response                                            â”‚
â”‚  5. Update state                                                â”‚
â”‚  6. Return to user                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€ "Suggest ideas" â”€â”€â”€â”€â”€â”€â–º IdeaSuggestionAgent
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            Research trends, calendar
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            Return 3-5 ideas
     â”‚
     â”œâ”€â”€â”€ "Create brief" â”€â”€â”€â”€â”€â”€â”€â–º WriterAgent
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            Generate detailed visual brief
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            Present for approval
     â”‚
     â”œâ”€â”€â”€ "Generate post" â”€â”€â”€â”€â”€â”€â–º ImagePostAgent
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            generate_complete_post()
     â”‚                            â”œâ”€â”€ Image generation
     â”‚                            â”œâ”€â”€ Caption writing
     â”‚                            â””â”€â”€ Hashtag generation
     â”‚
     â”œâ”€â”€â”€ "Edit this" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º EditPostAgent
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            regenerate_post()
     â”‚                            â”œâ”€â”€ Image editing
     â”‚                            â”œâ”€â”€ Caption improvement
     â”‚                            â””â”€â”€ Hashtag refresh
     â”‚
     â”œâ”€â”€â”€ "Plan campaign" â”€â”€â”€â”€â”€â”€â–º CampaignPlannerAgent
     â”‚                                    â”‚
     â”‚                                    â–¼
     â”‚                            Week-by-week planning
     â”‚                            â”œâ”€â”€ Research period
     â”‚                            â”œâ”€â”€ Present week plan
     â”‚                            â”œâ”€â”€ Wait for approval
     â”‚                            â””â”€â”€ Generate posts
     â”‚
     â””â”€â”€â”€ "Animate it" â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AnimationAgent
                                          â”‚
                                          â–¼
                                  animate_image()
                                  â””â”€â”€ Create video/reel
```

---

## Workflow State Machine

```
                                    START
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  BRAND_SETUP  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚BRAND_COMPLETE â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚MODE_SELECTION â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
                                      â”‚                                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
            â”‚                         â”‚                         â”‚       â”‚
            â–¼                         â–¼                         â–¼       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ SINGLE POST   â”‚        â”‚   CAMPAIGN    â”‚        â”‚GENERAL IMAGE  â”‚â”‚
    â”‚    FLOW       â”‚        â”‚     FLOW      â”‚        â”‚    FLOW       â”‚â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
            â”‚                         â”‚                         â”‚       â”‚
            â–¼                         â–¼                         â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
    â”‚POST_IDEA_SRC  â”‚        â”‚CAMPAIGN_SETUP â”‚                  â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
            â”‚                         â”‚                         â”‚       â”‚
            â–¼                         â–¼                         â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
    â”‚ IDEAS_SHOWN   â”‚        â”‚ WEEK_PLANNING â”‚â—„â”€â”€â”              â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚       â”‚
            â”‚                         â”‚          â”‚              â”‚       â”‚
            â–¼                         â–¼          â”‚              â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚       â”‚
    â”‚IDEA_SELECTED  â”‚        â”‚WEEK_PRESENTED â”‚   â”‚              â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚       â”‚
            â”‚                         â”‚          â”‚              â”‚       â”‚
            â–¼                         â–¼          â”‚              â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚       â”‚
    â”‚ BRIEF_GEN     â”‚        â”‚ WEEK_APPROVED â”‚   â”‚              â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚       â”‚
            â”‚                         â”‚          â”‚              â”‚       â”‚
            â–¼                         â–¼          â”‚              â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚       â”‚
    â”‚BRIEF_PRESENTEDâ”‚        â”‚WEEK_GENERATINGâ”‚   â”‚              â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚       â”‚
            â”‚                         â”‚          â”‚              â”‚       â”‚
            â–¼                         â–¼          â”‚              â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚       â”‚
    â”‚BRIEF_APPROVED â”‚        â”‚  NEXT_WEEK    â”‚â”€â”€â”€â”˜              â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
            â”‚                         â”‚                         â”‚       â”‚
            â–¼                         â–¼                         â”‚       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚       â”‚
    â”‚POST_GENERATINGâ”‚        â”‚CAMPAIGN_DONE  â”‚                  â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚       â”‚
            â”‚                         â”‚                         â”‚       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                                      â”‚                                  â”‚
                                      â–¼                                  â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
                              â”‚POST_GENERATED â”‚                          â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
                                      â”‚                                  â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
                        â”‚             â”‚             â”‚                    â”‚
                        â–¼             â–¼             â–¼                    â”‚
                    [Edit]      [Animate]      [Done] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚             â”‚
                        â–¼             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚EDIT_REQ   â”‚ â”‚ANIMATING  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Project Structure

```
hylancer_agent_factory/
â”œâ”€â”€ agents/                    # Agent definitions (Google ADK LlmAgent)
â”‚   â”œâ”€â”€ root_agent.py         # Orchestrator with sub-agents
â”‚   â”œâ”€â”€ idea_agent.py         # Content idea suggestions
â”‚   â”œâ”€â”€ writer_agent.py       # Visual brief creation
â”‚   â”œâ”€â”€ image_agent.py        # Image + caption + hashtag generation
â”‚   â”œâ”€â”€ caption_agent.py      # Caption-only generation
â”‚   â”œâ”€â”€ edit_agent.py         # Post editing/regeneration
â”‚   â”œâ”€â”€ animation_agent.py    # Video/reel creation
â”‚   â””â”€â”€ campaign_agent.py     # Multi-week campaign planning
â”‚
â”œâ”€â”€ prompts/                   # Agent system prompts
â”‚   â”œâ”€â”€ root_agent.py         # Orchestrator prompt with routing logic
â”‚   â”œâ”€â”€ idea_agent.py         # Idea suggestion prompt
â”‚   â”œâ”€â”€ writer_agent.py       # Brief creation prompt
â”‚   â”œâ”€â”€ image_agent.py        # Image generation prompt
â”‚   â”œâ”€â”€ caption_agent.py      # Caption writing prompt
â”‚   â”œâ”€â”€ edit_agent.py         # Edit/regeneration prompt
â”‚   â””â”€â”€ campaign_agent.py     # Campaign planning prompt
â”‚
â”œâ”€â”€ tools/                     # Agent tools (Python functions)
â”‚   â”œâ”€â”€ image_gen.py          # Image generation, editing, animation
â”‚   â”‚   â”œâ”€â”€ generate_post_image()
â”‚   â”‚   â”œâ”€â”€ generate_complete_post()  # Image + caption + hashtags
â”‚   â”‚   â”œâ”€â”€ edit_post_image()
â”‚   â”‚   â”œâ”€â”€ regenerate_post()
â”‚   â”‚   â”œâ”€â”€ animate_image()
â”‚   â”‚   â””â”€â”€ extract_brand_colors()
â”‚   â”œâ”€â”€ content.py            # Caption & hashtag tools
â”‚   â”‚   â”œâ”€â”€ write_caption()
â”‚   â”‚   â”œâ”€â”€ generate_hashtags()
â”‚   â”‚   â””â”€â”€ improve_caption()
â”‚   â”œâ”€â”€ calendar.py           # Calendar & events
â”‚   â”‚   â”œâ”€â”€ get_content_calendar_suggestions()
â”‚   â”‚   â”œâ”€â”€ get_upcoming_events()
â”‚   â”‚   â”œâ”€â”€ get_festivals_and_events()
â”‚   â”‚   â””â”€â”€ suggest_best_posting_times()
â”‚   â”œâ”€â”€ web_search.py         # Trend research
â”‚   â”‚   â”œâ”€â”€ search_trending_topics()
â”‚   â”‚   â””â”€â”€ search_web()
â”‚   â””â”€â”€ instagram.py          # Profile scraping (simulated)
â”‚
â”œâ”€â”€ config/                    # Configuration
â”‚   â”œâ”€â”€ settings.py           # Environment-based settings
â”‚   â””â”€â”€ models.py             # Per-agent model registry
â”‚
â”œâ”€â”€ memory/                    # Persistence layer
â”‚   â”œâ”€â”€ store.py              # SQLite-backed memory store
â”‚   â””â”€â”€ state.py              # Workflow state, BrandContext, UserUploadedImage
â”‚
â”œâ”€â”€ app/                       # Application layer
â”‚   â”œâ”€â”€ fast_api_app.py       # FastAPI server with SSE streaming
â”‚   â””â”€â”€ agent.py              # ContentStudioManager, backward compat
â”‚
â”œâ”€â”€ static/                    # Frontend assets
â”‚   â”œâ”€â”€ css/style.css         # UI styles (choice buttons, captions)
â”‚   â”œâ”€â”€ js/app.js             # ContentStudioApp class
â”‚   â””â”€â”€ presets/              # Brand presets & sample assets
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html            # Main UI template
â”‚
â”œâ”€â”€ data/                      # SQLite database storage
â”œâ”€â”€ uploads/                   # User uploads (logos, images)
â”‚   â””â”€â”€ user_images/          # User images for posts
â”œâ”€â”€ generated/                 # Generated content (images, videos)
â”‚
â”œâ”€â”€ .env                       # Environment variables
â”œâ”€â”€ requirements.txt           # Python dependencies
â””â”€â”€ README.md                  # This file
```

---

## Data Flow

### 1. Brand Setup Flow

```
User fills brand form
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (app.js)                     â”‚
â”‚  1. Collect brand info (name, colors, logo, etc.)       â”‚
â”‚  2. Upload logo via /upload-logo                        â”‚
â”‚  3. Upload reference images via /upload-reference       â”‚
â”‚  4. Upload user images via /upload-user-image           â”‚
â”‚  5. Send brand context to /chat/stream                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (FastAPI)                     â”‚
â”‚  1. Validate uploads (type, size, dimensions)           â”‚
â”‚  2. Store files in uploads/                             â”‚
â”‚  3. Extract colors from images                          â”‚
â”‚  4. Create BrandContext in session                      â”‚
â”‚  5. Set workflow state to BRAND_COMPLETE                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RootAgent                           â”‚
â”‚  1. Store brand context in memory                       â”‚
â”‚  2. Present mode selection options                      â”‚
â”‚  3. Wait for user choice                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Single Post Generation Flow

```
User: "Create a Valentine's Day post"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RootAgent                           â”‚
â”‚  1. Detect: Single post request for Valentine's Day     â”‚
â”‚  2. Check: Does user have specific idea?                â”‚
â”‚     - No â†’ Route to IdeaSuggestionAgent                 â”‚
â”‚     - Yes â†’ Route to WriterAgent                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 IdeaSuggestionAgent                      â”‚
â”‚  1. Research Valentine's Day trends                     â”‚
â”‚  2. Check calendar for relevant events                  â”‚
â”‚  3. Generate 3-5 content ideas                          â”‚
â”‚  4. Present to user for selection                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ (User selects idea)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WriterAgent                           â”‚
â”‚  1. Take selected idea                                  â”‚
â”‚  2. Create detailed visual brief:                       â”‚
â”‚     - Visual concept description                        â”‚
â”‚     - Text elements (headline, subtext, CTA)            â”‚
â”‚     - Color recommendations                             â”‚
â”‚     - Layout suggestions                                â”‚
â”‚  3. Present brief for approval                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ (User approves)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ImagePostAgent                         â”‚
â”‚  1. Call generate_complete_post() with:                 â”‚
â”‚     - Visual brief as prompt                            â”‚
â”‚     - Brand context (name, colors, logo)                â”‚
â”‚     - User images (if provided)                         â”‚
â”‚     - Occasion: Valentine's Day                         â”‚
â”‚  2. Tool generates:                                     â”‚
â”‚     - Image via Gemini 2.0 Flash                        â”‚
â”‚     - Caption via Gemini 2.5 Flash                      â”‚
â”‚     - Hashtags via Gemini 2.5 Flash                     â”‚
â”‚  3. Return complete post                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend                              â”‚
â”‚  1. Display image in gallery                            â”‚
â”‚  2. Show caption below image                            â”‚
â”‚  3. Show hashtags with copy buttons                     â”‚
â”‚  4. Offer edit/animate options                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Campaign Planning Flow

```
User: "Plan content for February"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 CampaignPlannerAgent                     â”‚
â”‚                                                          â”‚
â”‚  SETUP PHASE:                                           â”‚
â”‚  1. Ask: How many weeks? Posts per week?                â”‚
â”‚  2. Research February events & trends                   â”‚
â”‚  3. Present campaign overview                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEEK-BY-WEEK APPROVAL:                                 â”‚
â”‚                                                          â”‚
â”‚  For each week:                                         â”‚
â”‚  1. Present week plan (table format)                    â”‚
â”‚  2. Show post details for each day                      â”‚
â”‚  3. Ask: "Approve Week X?" (yes/tweak/skip)             â”‚
â”‚                                                          â”‚
â”‚  On approval:                                           â”‚
â”‚  4. Generate each post via generate_complete_post()     â”‚
â”‚  5. Present results                                     â”‚
â”‚  6. Move to next week                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETION:                                            â”‚
â”‚  1. Show campaign summary                               â”‚
â”‚  2. List all generated posts with paths                 â”‚
â”‚  3. Offer edit options for specific posts               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Configuration

### Environment Variables

Create a `.env` file:

```env
# Required
GOOGLE_API_KEY=your_google_api_key_here

# Per-Agent Model Configuration
DEFAULT_MODEL=gemini-2.5-flash
ORCHESTRATOR_MODEL=gemini-2.5-flash
IDEA_MODEL=gemini-2.5-flash
WRITER_MODEL=gemini-2.5-flash
IMAGE_MODEL=gemini-2.0-flash-exp
EDIT_MODEL=gemini-2.0-flash-exp
CAMPAIGN_MODEL=gemini-2.5-flash
VIDEO_MODEL=veo-2.0-generate-001

# Server Configuration
HOST=0.0.0.0
PORT=5001
DEBUG=true
ALLOWED_ORIGINS=http://localhost:5001,http://127.0.0.1:5001

# File Upload Limits
MAX_UPLOAD_SIZE_MB=10
MAX_IMAGE_DIMENSION=4096
MAX_USER_IMAGES=10

# Rate Limiting
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_WINDOW=60

# Session Configuration
SESSION_TIMEOUT_HOURS=24
```

### Model Registry

The `config/models.py` provides per-agent model configuration:

```python
def get_orchestrator_model() -> str:
    return os.getenv("ORCHESTRATOR_MODEL", "gemini-2.5-flash")

def get_image_model() -> str:
    return os.getenv("IMAGE_MODEL", "gemini-2.0-flash-exp")

def get_video_model() -> str:
    return os.getenv("VIDEO_MODEL", "veo-2.0-generate-001")
```

---

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Main UI |
| `/health` | GET | Health check |
| `/chat/stream` | POST | Send message (SSE streaming) |
| `/upload-logo` | POST | Upload logo file |
| `/upload-reference` | POST | Upload reference image |
| `/upload-user-image` | POST | Upload user image for posts |
| `/update-user-image-intent` | POST | Update user image usage intent |
| `/sessions` | POST | Create new session |
| `/generated-images` | GET | List generated content |
| `/preset-paths` | GET | Get preset asset paths |
| `/generated/{filename}` | GET | Serve generated files |

---

## UI Features

### Interactive Choice Buttons

When agents present multiple choice questions, the UI renders clickable buttons:

```
Agent: "What would you like to create?"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¸ Single Post â”‚ â”‚ ğŸ“… Campaign    â”‚ â”‚ âœ¨ Quick Image â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gallery with Caption Display

Generated images display with associated captions and hashtags:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         [Generated Image]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ Caption                   [Copy] â”‚
â”‚ "Celebrate love this Valentine's..." â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ #ï¸âƒ£ Hashtags                  [Copy] â”‚
â”‚ #ValentinesDay #Love #Celebration   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [ğŸ“‹ Copy Full Post]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/hylancer/agent-factory.git
   cd agent-factory
   ```

2. **Create virtual environment:**
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # On Windows: .venv\Scripts\activate
   ```

3. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Set up environment variables:**
   ```bash
   cp env.example .env
   # Edit .env and add your GOOGLE_API_KEY
   ```

5. **Run the application:**
   ```bash
   python -m app.fast_api_app
   ```

6. **Open in browser:**
   ```
   http://localhost:5001
   ```

---

## Usage

1. **Brand Setup** - Configure your brand (name, logo, colors, reference images, user images)
2. **Choose Mode** - Single Post, Campaign, Carousel, or Quick Image
3. **Get Ideas** - AI suggests relevant content ideas (for Single Post)
4. **Approve Brief** - Review and approve the visual brief
5. **Generate** - Create professional visuals with your brand identity
6. **Edit/Refine** - Make changes to images, captions, or hashtags
7. **Animate** - Optionally convert to video/Reels
8. **Export** - Copy captions and hashtags, download images

---

## Key Technologies

- **Google ADK** - Agent Development Kit for multi-agent orchestration
- **Gemini 2.5 Flash** - Text generation (captions, ideas, reasoning)
- **Gemini 2.0 Flash Exp** - Image generation
- **Veo 2.0** - Video generation
- **FastAPI** - Backend API with SSE streaming
- **SQLite** - Session and memory persistence
- **Vanilla JS** - Frontend without framework dependencies

---

## License

MIT

---

## Contributing

Pull requests are welcome! For major changes, please open an issue first.

### Development Notes

- Agent prompts are in `prompts/` - keep them concise and focused
- New tools should include error handling and retry logic
- State transitions are defined in `memory/state.py`
- All file uploads are validated in `app/fast_api_app.py`
- Per-agent models are configured via environment variables
